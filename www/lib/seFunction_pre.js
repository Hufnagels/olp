(function(e,l,d){var o={leftContainer:document.getElementById("mySlideshowsContainer")||"",mainContainer:document.getElementById("slideEditor")||"",previewContainer:document.querySelector("div.preview")||"",previewIframe:document.getElementById("previewIframe")||"",form:document.getElementById("saveslidesform")||"",slideshowContainer:document.getElementById("slidesList")||"",allslideshowContainer:document.getElementById("slidesList2")||"",mymediaContainer:document.getElementById("editorsMediaBox")||"",testsContainer:document.getElementById("testSlides")||"",tempDiv:document.getElementById("tempDiv")||"",matrixHolder:'<span id="play" style=""><span class="rotate">rotate</span>		<span class="scale">scale</span><span class="skewx">skew</span><span class="skewy">skew</span><span class="move">move</span></span>'||"",matrixWrapper:'<span id="play" style=""></span>'||"",matrixWrapperButtons:'<span class="rotate">rotate</span>		<span class="scale">scale</span><span class="skewx">skew</span><span class="skewy">skew</span><span class="move">move</span>'||""},b={loadSlideshowContainer:document.getElementById("loadSlideshow")||"",loadSlideshowButton:document.getElementById("loadSlideShowButton")||"",init:function(){this.viewList()},selectFolder:function(){l("#themeList a").bind("click",function(t){if(l(this).parent().hasClass("selected")){return false}var s=l(this).closest("#themeList").prev(".selectMenu");s.find("span.name").text(l(this).text());var u=l(this).text();u=u.length>12?u.substring(0,11)+"...":u;s.find("span.name").text(u).attr("title",l(this).text());s.attr("data-diskarea-id",l(this).attr("data-diskarea-id"));l(this).closest("#themeList").find("li").removeClass("selected").end();l(this).parent().addClass("selected");if(l(this).closest("#themeList").prev(".selectMenu").attr("id")=="daForSlideShow"){l('#saveslidesform input[name="diskArea"]').val(l(this).attr("data-diskarea-id"));m.helperFunctions.se_clearData("all")}else{l(this).closest(".pull-right").removeClass("open")}return false})},viewList:function(){g.loadedSlideshows=this.helperFunctions.handelSlideshow("",1);if(!g.loadedSlideshows){return false}l(b.loadSlideshowContainer).empty().append(tmpl("tmpl-lsslist",g.loadedSlideshows));l(b.loadSlideshowButton).find("span.name").text("select slideshow");g.disabledSlideshows=l.map(l("li.disabled a",b.loadSlideshowContainer),function(s){return l(s).attr("data-id")});k.viewList();this.setSlideshowAction()},setDisabled:function(s){var t=l(k.loadSlideshowContainer2).find("li.selected a").attr("data-id");if(s.attr("data-id")==t){l(k.loadSlideshowContainer2).empty();l(k.loadSlideshowButton2).find("span.name").text("select slideshow").attr("title","")}l(k.loadSlideshowContainer2).find("a").each(function(){l(this).removeClass("disabled")});l(k.loadSlideshowContainer2).find('a[data-id="'+s.attr("data-id")+'"]').addClass("disabled")},loadSelectedSlideshow:function(s){g.selectedSlideshowId=s.attr("data-id");p={};p.action=j.slideshows[0];p.id=g.selectedSlideshowId;p.form=l(o.form).serializeArray();f.url="/crawl?/process/editor/handelslideshow/";f.data=p;var t=getJsonData(f);if(!t){return false}this.printSlide(s,t)},printSlide:function(t,u){var w=t.find("span.sname").text(),v=w.length>18?w.substring(0,15)+"...":w,x=t.attr("data-id");b.helperFunctions.setFormData({id:x,name:w});l(b.loadSlideshowButton).find("span.name").text(v).attr("title",w);t.parent().siblings().removeClass("selected");t.parent().addClass("selected");var s=tmpl("tmpl-miniSlides",u,true);l(o.slideshowContainer).empty().append(s);this.initSortable();g.slideSaved=true;t.closest(".open").removeClass("open");g.prevOffset=false;m.toolbarElements.initColorpicker();this.setSlideAction();b.setDisabled(t);b.handelEditable(t)},handelEditable:function(s){l("#bc").html('<span class="pull-left"><a class="editable" id="mbName_'+s.attr("data-id")+'" data-type="text" data-pk="'+s.attr("data-id")+'">'+s.find("span.sname").text()+'</a></span><span class="btn btn-empty btn-dark" id="deleteGrp" data-id="'+s.attr("data-id")+'"><i class="icon-trash"></i></span>');var t=s.attr("data-id");l.fn.editable.defaults.url="/crawl?/process/editor/handelslideshow/";l.fn.editable.defaults.params=function(u){u.action="rename";u.form=l(o.form).serializeArray();return u};this.removeGroup(document.getElementById("deleteGrp"));l("#mbName_"+t).editable({success:function(u,v){if(v.match(/^\s+$/)===null&&v.length===0){sendMessage("alert-error","Give a name");return false}s.find("span.name").text(v);l(b.loadSlideshowButton).find("span.name").text(v);l(b.loadSlideshowContainer).find("li.selected .sname").text(v);b.setDisabled(s);l(k.loadSlideshowContainer2).find('a[data-id="'+s.attr("data-id")+'"] > .sname').text(v)}})},removeGroup:function(s){addEventO(s,"click",function(){l("#confirmDiv").confirmModal({heading:"Question",body:"Do you really want to delete this slideshow?",type:"question",text:"Delete",cancel:true,callback:function(){p={};p.action=j.slideshows[4],p.form=l(o.form).serializeArray();p.id=l(s).attr("data-id");f.url="/crawl?/process/editor/handelslideshow/";f.data=p;var t=getJsonData(f);if(t){b.helperFunctions.deleteSlideshow(s)}return false}})},false,_eventHandlers)},setSlideshowAction:function(){l(b.loadSlideshowContainer).on("click","a",function(t){t.preventDefault();t.stopPropagation();var u=l(this);if(u.attr("data-id")==""){return false}if(u.parent().hasClass("selected")){return false}if(!g.slideShowSaved){b.createNewSlideshow();g.triggerSave=true;return false}if(!g.slideSaved){var s=b.helperFunctions.getEditorHtml();b.helperFunctions.updateSlide(s);g.slideSaved=true;return false}m.helperFunctions.se_clearData("all");b.loadSelectedSlideshow(u)})},setSlideAction:function(){var s=l(o.slideshowContainer).find(".slideElement");l(o.slideshowContainer).on("click",".slideElement .rightSide",function(u){u.stopPropagation();if(l(this).closest(".dataHolder").hasClass("selected")){return false}if(!m.helperFunctions.checkSlideState()){l(m.toolbarElements.saveSlideButton).trigger("click")}g.selectedSlideId=l(this).closest("li").attr("id");g.slideSaved=true;m.helperFunctions.checkSlideState();s.parent().removeClass("selected");var t=l(this).closest("li");b.helperFunctions.setSelectedSlide(t)})},setTrafficAction:function(){l(o.slideshowContainer).on("click",".slideElement .rightSide i",function(s){TOlog("pap2","setraffic");l(this).toggleClass(g.openedClass+" "+g.closedClass);l(this).closest("li.slideElement").find(".trafficData").toggleClass("opened")})},createNewSlideshow:function(){var u=[],s="",t=[];u.result=[];u.result.push({input:"",desc:"",folders:folderString});s=tmpl("tmpl-saveslideshow",u);l("#confirmDiv").confirmModal({heading:"Give a name of your slideshow",body:s,text:"Save",type:"question",cancel:true,callback:function(){if(l("#slideshowName").val()==""){sendMessage("alert-error","Empty name is forbidden");return false}var x=[];x.push({name:l("#slideshowName").val(),description:l("#slideshowDescription").val(),diskArea:g.diskAreaId});t=b.helperFunctions.handelSlideshow(x,2);if(t.type){return false}l(o.slideshowContainer).empty();var v={id:t.result[0].id.toString(),name:t.result[0].name};b.helperFunctions.setFormData(v);l(b.loadSlideshowContainer).prepend(tmpl("tmpl-lsslist",t,true));l(b.loadSlideshowButton).find("span.name").text(t.result[0].name);l(k.loadSlideshowContainer2).prepend(tmpl("tmpl-lsslist",t,true));var w=l(b.loadSlideshowContainer).find('a[data-id="'+t.result[0].id+'"]');w.parent().addClass("selected");b.setDisabled(w);g.slideShowSaved=true;g.slideSaved=false;b.handelEditable(w);if(g.triggerSave){t=b.helperFunctions.getEditorHtml();b.helperFunctions.addNewSlide(t)}else{m.helperFunctions.se_clearData("all");b.handelEditable(w)}b.setSlideAction()}})},duplicateSlideshow:function(s){},createPreview:function(s){},initSortable:function(){l(o.slideshowContainer).nestedSortable(b.sortableSlides)},helperFunctions:{loadSlideshowList:function(){p={};p.action=j.slideshows[1];p.form=l(o.form).serializeArray();f.url="/crawl?/process/editor/handelslideshow/";f.data=p;var s=getJsonData(f);return s},deleteSlideshow:function(s){l(b.loadSlideshowContainer).find("li.selected").remove();l(o.slideshowContainer).empty();m.helperFunctions.se_clearData("editor");l(b.loadSlideshowButton).find(".name").text("select slideshow");l(k.loadSlideshowContainer2).find('a[data-id="'+l(s).attr("data-id")+'"]').closest("li").remove()},handelSlideshow:function(t,s){p={};p.data=t;p.action=j.slideshows[s];p.form=l(o.form).serializeArray();f.url="/crawl?/process/editor/handelslideshow/";f.data=p;var u=getJsonData(f);return u},handelSlides:function(t,s){p={};p.data=t.result;p.toArray=t.arraied;p.action=j.slide[s];p.form=l(o.form).serializeArray();f.url="/crawl?/process/editor/handelslides/";f.data=p;var u=getJsonData(f);return u?u:false},getEditorHtml:function(){l(o.tempDiv).length==0?l("body").append('<div id="tempDiv" />'):l(o.tempDiv).html("");l(o.tempDiv).css({width:g.editingAreaWidth,height:g.editingAreaHeight});m.helperFunctions.removeUIevents();m.helperFunctions.removeToolsEvent();if(l(m.editorAreaElememts.editorArea).find(".buttonClass").length==0&&l(m.editorAreaElememts.editorArea).attr("data-slide-type")!=="normal"){l(m.editorAreaElememts.editorArea).append('<div class="buttonClass disabled" style="left: 87.13333333333333%; top: 91.25925925925927%; width: 12%; height: auto; position: absolute;"><button type="button" id="submitForm" class="btn btn-dark btn-r">send</button></div>');g.templateSlide=true}else{if(l(m.editorAreaElememts.editorArea).attr("data-template-type")=="normal"){l(m.editorAreaElememts.editorArea).find(".buttonClass").remove();g.templateSlide=false}}var s=l(m.editorAreaElememts.editorArea).html();l(o.tempDiv).append(s);var u=b.helperFunctions.gatherSlideData(0);var t=l(o.slideshowContainer).find("li").length>0?l(o.slideshowContainer).nestedSortable("toArray",{startDepthCount:0,slideShowId:l('#saveslidesform [name="id"]').val()}):[];return[s,u,t]},gatherSlideData:function(s){var v=l(o.tempDiv).find('div[id^="myInstance_"]'),x;for(var t=0;t<v.length;t++){x=s?(new Date().getTime())+t:v[t].getAttribute("id");v[t].setAttribute("data-temp-id",x);v[t].setAttribute("id","myInstance_"+x)}var u=[];var w=document.getElementById("tempDiv");l.when(c.recurseDomChildren(w,true)).done(function(y){u=m.helperFunctions.serializeForm(l(o.tempDiv),l(m.editorAreaElememts.editorArea).attr("data-template-type"))});return u},setFormData:function(s){document.getElementById("slideshowID").value=s.id;document.getElementById("slideshowNAME").value=s.name;l(o.form).find('input[name="diskArea"]').val(g.diskAreaId)},setSlidesCount:function(){var s=l(o.slideshowContainer).find(".dataHolder.selected").parent().attr("id");var t=l(o.slideshowContainer).find("li.slideElement").length;l(b.loadSlideshowContainer).find('a[data-id="'+s+'"]').children(".badge").text(t);l(k.loadSlideshowContainer2).find('a[data-id="'+s+'"]').children(".badge").text(t)},setSelectedSlide:function(B){m.helperFunctions.checkSlideState();g.templateSlide=(B.attr("data-slide-type")=="template")?true:false;g.templateSlide==true?l(m.bottombarElements.testEditorContainer).show():l(m.bottombarElements.testEditorContainer).hide();l(".trafficDataHolder, .tools").html("");g.templateSlide?l(m.bottombarElements.bottomBar).find(".level").show():l(m.bottombarElements.bottomBar).find(".level").hide();l(o.allslideshowContainer).find(".dataHolder").removeClass("selected").end();l(o.slideshowContainer).find(".dataHolder").removeClass("selected").end();B.find(".dataHolder").addClass("selected");l(m.editorAreaElememts.editorArea).attr("data-slide-type",(g.templateSlide==true?"template":"normal"));l(m.editorAreaElememts.editorArea).attr("data-template-type",(g.templateSlide==true?B.attr("data-template-type"):""));m.helperFunctions.ckedit.clearEditorInstances();var w=B.find(".leftSide").html(),x=B.find(".descriptionTag").html(),C=B.find(".rightSide .name").text();m.toolbarElements.setColorPicker(B.attr("data-bg"));l(m.editorAreaElememts.editorArea).empty().html(w);l(m.bottombarElements.slidetagInput).val(C);if(g.templateSlide){var v=a.getTrafficData(B),w=tmpl("tmpl-trafficdata",v);l(w).appendTo(l(".trafficDataHolder"));l(m.editorAreaElememts.editorArea).find("option").live("click",function(){l(this).siblings().attr("selected","");l(this).attr("selected","selected")});l('[name="levelCount"] option').filter(function(){return l(this).val()==B.attr("data-slidelevel")}).attr("selected",true);var s=l(m.editorAreaElememts.editorArea).find(".sortableForm:not([id])");if(s.length>0){l.each(s,function(){l(this).attr("id","group_"+createUID())})}switch(l(m.editorAreaElememts.editorArea).attr("data-template-type")){case"radio":var A=l(m.editorAreaElememts.editorArea).find('input[type="radio"]');l.each(A,function(){l(this).attr("id","r"+createUID());l(this).next("label").attr("for",l(this).attr("id"))});break;case"check":var A=l(m.editorAreaElememts.editorArea).find('input[type="checkbox"]');l.each(A,function(){l(this).attr("id","c"+createUID());l(this).next("label").attr("for",l(this).attr("id"))});break}g.slideSaved=true;m.helperFunctions.checkSlideState()}var y=l(m.editorAreaElememts.editorArea).find('div[id^="myInstance_"]');var z=[];y.each(function(D,E){var F=l(this).attr("id").replace(/myInstance_/g,"");l(this).attr("id","myInstance_"+F);z.push(F)});z=z.sort();var u=[];u=z.filter(function(E,F,D){return D.indexOf(E)==F});u=[];for(var t=0;t<z.length;t++){l(y[t]).attr("id","myInstance_"+createUID2()).attr("class","textDiv")}y.each(function(D,E){m.helperFunctions.ckedit.createEditorInstance(l(E).attr("id"),true)});m.helperFunctions.addUIevents();if(g.templateSlide){m.helperFunctions.addToolsEvent(B.attr("data-template-type"));l(m.editorAreaElememts.editorArea).find(".sortableForm").droppable(r.formDrop).sortable(r.formSortable);l(m.editorAreaElememts.editorArea).find(".holder .textDiv").droppable(r.templateDropOption);b.setTrafficAction()}m.toolbarElements.resetColorPicker();g.selectedSlideBg=B.attr("data-bg")==""?"rgba(0, 0, 0, 0)":B.attr("data-bg");l(m.editorAreaElememts.editorArea).find(".elementSelected").each(function(){l(this).removeClass(".elementSelected")})},addNewSlide:function(v){var w=new Date().getTime(),z=v[0],B=v[1].html2,u=v[1].answare,F=l("#slideTag").val(),E=l(".description").val(),D=l(o.slideshowContainer).find("li.slideElement").length+1,C=(g.templateSlide==true)?"template":"normal",A=l(m.editorAreaElememts.editorArea).attr("data-template-type"),y={};y.result=[];y.result.push({id:w,html:z,html2:B,tag:F,badge:D,type:C,templateType:clearNULL(A),description:E,background:m.editorAreaElememts.editorArea.style.backgroundColor});if(g.templateSlide){var x=a.setTrafficData();y.result[0].templateOption=x;y.result[0].templateType=A;y.result[0].slideLevel=l('[name="levelCount"]').val();m.helperFunctions.addToolsEvent(A)}var t=b.helperFunctions.handelSlides(y,1);if(l(o.slideshowContainer).find(".dataHolder.selected").length){l(tmpl("tmpl-miniSlides",t,true)).insertAfter(l(o.slideshowContainer).find(".dataHolder.selected"))}else{l(o.slideshowContainer).append(tmpl("tmpl-miniSlides",t,true))}g.slideSaved=true;l(o.slideshowContainer).find(".dataHolder.selected").removeClass("selected");var s=l(o.slideshowContainer).find('li[id="'+t.result[0].id+'"]');b.helperFunctions.setSelectedSlide(s)},updateSlide:function(w){var z=w[0],A=w[1].html2,v=w[1].answare,E=l("#slideTag").val(),B=l(".description").val(),C=l(o.slideshowContainer).find(".dataHolder.selected").parent(),y={};y.result=[];C.find(".leftSide").html("").html(z);C.find(".rightSide").find(".name").text(E);y.result.push({id:C.attr("id"),type:C.attr("data-slide-type"),templateType:clearNULL(C.attr("data-template-type")),badge:C.find("span.badge.nr").text(),tag:E,html:z,html2:A,answare:v,description:B,background:m.editorAreaElememts.editorArea.style.backgroundColor});C.find(".descriptionTag").html(B);if(g.templateSlide){var s=l(".trafficDataHolder").find("div.control-group");var x=[];l.each(s,function(F,H){var I=a.getslidesIDforTrafficData(l(H).find("#slidePrev").val());var G=a.getslidesIDforTrafficData(l(H).find("#slideNext").val());x.push({prev:l(H).find("#slidePrev").val(),prevID:(I=="undefined"?0:I),score:l(H).find("#slideScore").val(),next:l(H).find("#slideNext").val(),nextID:(G=="undefined"?0:G)})});y.result[0].templateOption=x;y.result[0].slideLevel=l('[name="levelCount"] option:selected').val();var u={};u.result=x;var D=tmpl("tmpl-slidetrafficdata",u);C.find(".trafficData").find(".whiteLine").remove().addClass("opened");C.find(".trafficData").append(l(D))}var t=b.helperFunctions.handelSlides(y,3);if(t){g.slideSaved=true;m.helperFunctions.checkSlideState()}l(m.toolbarElements.saveSlideButton).removeClass("active")}},sortableSlides:{handle:".rightSide",items:"li.slideElement",toleranceElement:"> div",placeholder:"sortablePlaceholder",forcePlaceholderSize:true,isTree:true,maxLevels:1,update:function(y,x){l("#slidesList > li.slideElement").each(function(z,A){l(A).find(".badge.nr").text(z+1);a.updateSlidesIDarray(l(A).attr("id"),(z+1),"new");a.refreshslidesIDinTrafficData(l(A).attr("id"))});var w=l('#slidesList li[data-slide-type="template"]').find("div.dataHolder.selected");if(w.length==1){var v=a.getTrafficData(w.parent());var t=tmpl("tmpl-trafficdata",v);l(t).appendTo(l(".trafficDataHolder"))}a.storeslideIDs();var u=[];u.result="";u.arraied=l(o.slideshowContainer).nestedSortable("toArray",{nestedType:"slide",startDepthCount:0,slideShowId:l('#saveslidesform [name="id"]').val()});var s=b.helperFunctions.handelSlides(u,4)},stop:function(w,v){if(v.position.left<-70){var s,u=false;var t=l(v.item).attr("id");u=a.searchslidesIDinTrafficData(t);u==false?s="Do you really want to delete this Slide?":s="Do you really want to delete this Slide?<br />Template slide is pointing to it!";l("#confirmDiv").confirmModal({heading:"Alert",body:s,text:"Remove",type:"question",cancel:true,callback:function(){var y=[];y.result=t;y.arraied=l(o.slideshowContainer).nestedSortable("toArray",{nestedType:"slide",startDepthCount:0,slideShowId:l('#saveslidesform [name="id"]').val()});var x=b.helperFunctions.handelSlides(y,2);if(x.type!=="error"){if(l(v.item).find(".dataHolder.selected").length==1){m.helperFunctions.se_clearData(l(v.item).attr("data-slide-type"))}l(v.item).remove();a.deleteslidesIDinTrafficData(t);a.storeslideIDs();l("#slidesList > li.slideElement").each(function(z,A){l(A).find(".badge.nr").text(z+1);a.updateSlidesIDarray(l(A).attr("id"),(z+1),"new");a.refreshslidesIDinTrafficData(l(A).attr("id"))});y.arraied=l(o.slideshowContainer).nestedSortable("toArray",{nestedType:"slide",startDepthCount:0,slideShowId:l('#saveslidesform [name="id"]').val()});var x=b.helperFunctions.handelSlides(y,4)}l(o.slideshowContainer).nestedSortable(b.sortableSlides);b.helperFunctions.setSlidesCount()}})}}}},n={sortingBar:document.getElementById("sortingIconBar")||"",groupList:document.getElementById("mediaBoxList2")||"",init:function(){this.selectBox();this.filterFiles()},filterFiles:function(){l(n.sortingBar).find("button").bind("click",function(){if(l(o.mymediaContainer).find("li").length==0){return false}var t=l(this).attr("data-class");l(o.mymediaContainer).find("li").hide();var s=t.split(/\s+/g);for(i in s){t==""?l(o.mymediaContainer).find("li").show():l(o.mymediaContainer).find("li."+s[i]).show()}})},selectBox:function(){l(n.groupList).on("click","li:not(.selected) a.level2",function(s){var u=l(this);s.preventDefault();s.stopPropagation();u.parent().siblings().removeClass("selected");u.parent().addClass("selected");var t=l(this).find("span.name").text();t=t.length>20?t.substring(0,20)+"...":t;l(n.groupList).prev().find("span.name").text(t).attr("title",l(this).find("span.name").text());n.viewBoxFiles(u.attr("data-id"));l(".selectMenu").parent().removeClass("open")})},viewBoxFiles:function(t){p={};p.action=(t=="all"?j.mediafiles[0]:j.mediafiles[1]);p.group=t;p.form=l(o.form).serializeArray();p.diskArea=g.diskAreaId;f.url="/crawl?/process/editor/loadmediafiles/";f.data=p;var s=getJsonData(f);if(!s){return false}l(o.mymediaContainer).html(tmpl("tmpl-mediaElement",s));n.addDND()},addDND:function(){l(o.mymediaContainer).find("li").draggable(n.myMediaDragOption)},myMediaDragOption:{appendTo:"body",handle:"img",revert:"true",helper:"clone",start:function(t,s){l(m.editorAreaElememts.editorArea).find(".holder .textDiv").droppable(r.templateDropOption);m.helperFunctions.removeToolsEvent();l(m.editorAreaElememts.editorArea).droppable(m.helperFunctions.ui.editorDropOption);g.prevOffset=true},stop:function(t,s){l(m.editorAreaElememts.editorArea).droppable("destroy");if(l(m.editorAreaElememts.editorArea).attr("data-template-type")!=="normal"){m.helperFunctions.addToolsEvent(l(m.editorAreaElememts.editorArea).attr("data-template-type"))}}}},r={init:function(){l(o.testsContainer).on("click",".slideElement .rightSide",function(t){t.stopPropagation();if(l(this).closest(".dataHolder").hasClass("selected")){return false}g.selectedSlideId=l(this).closest("li").attr("id");g.slideSaved=false;m.helperFunctions.checkSlideState();l(o.slideshowContainer).find(".dataHolder.selected").removeClass("selected");l(this).parent().removeClass("selected");var s=l(this).closest("li");b.helperFunctions.setSelectedSlide(s)})},toolsDrag:{appendTo:"body",handle:"li",revert:"true",helper:"clone",start:function(t,s){l(m.editorAreaElememts.editorArea).find(".sortableForm").droppable(r.formDrop).sortable(r.formSortable);l(s.helper).find("#addOptionRow").remove()},stop:function(t,s){l(m.editorAreaElememts.editorArea).find(".sortableForm").droppable("destroy")}},toolsDrag2:{appendTo:"body",handle:"li",revert:"true",helper:"clone",start:function(t,s){g.prevOffset=true;l(m.editorAreaElememts.editorArea).droppable(m.helperFunctions.ui.editorDropOption)},stop:function(t,s){l(m.editorAreaElememts.editorArea).droppable("destroy");m.helperFunctions.addUIevents();m.helperFunctions.addToolsEvent("groupping")},drag:function(u,t){var s=t.helper}},formDrop:{tolerance:"touch",activeClass:"ui-state-highlight",hoverClass:"ui-state-active",greedy:true,drop:function(y,A){var v=A.draggable.clone();var z=createUID2();v.attr("class","holder");v.find(".btn-dark").removeClass("btn");v.find(":input").attr("id",z);v.find("label").attr("for",z);var x=l(m.editorAreaElememts.editorArea).attr("data-template-type");switch(x){case"radio":case"check":l(this).append(v);var B=l(this).find(":input");var t=new Date().getTime(),s="myInstance_"+t;v.find(".textDiv").attr("id",s);m.helperFunctions.ckedit.createEditorInstance(s,true);for(var u=0,y;y=B[u];u++){y.value=u}l(m.editorAreaElememts.editorArea).find(".sortableForm").sortable(r.formSortable);break;case"input":var w=v;v.find("span.btn-dark").remove();if(!c.elementContainsSelection(document.getElementById(l(m.editorAreaElememts.editorArea).find(".sortableForm").attr("id")))){return false}c.pasteHtmlAtCaret(w.html());var B=l(m.editorAreaElememts.editorArea).find(".sortableForm input");for(var u=0,y;y=B[u];u++){if(y.nodeName=="INPUT"){y.name="inp"+u}else{if(y.nodeName=="SELECT"){y.name="sel"+u}}}break;case"sorting":case"groupping":case"pairing":var t=new Date().getTime(),s="myInstance_"+t;v.attr("id","sort_"+createUID());v.find(".textDiv").attr("id",s);l(this).append(v);m.helperFunctions.ckedit.createEditorInstance(s,true);l(m.editorAreaElememts.editorArea).find(".sortableForm").sortable(r.formSortable);break}g.slideSaved=false;g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");m.helperFunctions.checkSlideState()}},formSortable:{cancel:":input,button,.contenteditable",placeholder:"ui-state-highlight",handle:"span.btn-dark",forcePlaceholderSize:true,connectWidth:"#editorArea .sortableForm",start:function(t,s){m.helperFunctions.removeUIevents();m.helperFunctions.removeToolsEvent()},stop:function(t,s){g.slideSaved=false;g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");m.helperFunctions.checkSlideState();if(l(m.editorAreaElememts.editorArea).attr("data-template-type")!=="normal"){m.helperFunctions.addToolsEvent(l(m.editorAreaElememts.editorArea).attr("data-template-type"))}m.helperFunctions.addUIevents()},out:function(t,s){if(s.position.left<-70){l(s.item).remove();l(m.editorAreaElememts.editorArea).find(".sortableForm li").sortable(r.formSortable);g.slideSaved=false}m.helperFunctions.checkSlideState()}},templateDropOption:{tolerance:"pointer",accept:".image, .video, .audio",activeClass:"ui-state-highlight",hoverClass:"ui-state-active",drop:function(B,E){var t=l(this).offset();var u=B.pageX-t.left;var s=B.pageY-t.top;u=parseInt(u/g.editingAreaWidth*100);s=parseInt(s/g.editingAreaHeight*100);var v,D,G,A;var y=[];y.result=[];switch(E.draggable.children().attr("class")){case"colorBar image":v=160;D=120;G=parseInt(v/g.editingAreaWidth*100);A=parseInt(D/g.editingAreaHeight*100);y.result.push({mediaurl:E.draggable.attr("data-mediaurl"),left:"0%",top:"0%",width:"100%",height:"auto"});var x=l('<div style="left:0%;top:0%; width:20%; height:2%"><img src="'+E.draggable.clone().attr("data-mediaurl")+'" /></div>');if(!c.elementContainsSelection(document.getElementById(l(this).attr("id")))){return false}c.pasteHtmlAtCaret(x.html());l(this).append(l(H));g.prevOffset=false;break;case"colorBar audio":v=250;D=30;G=parseInt(v/g.editingAreaWidth*100);A=parseInt(D/g.editingAreaHeight*100);y.result.push({mediaurl:E.draggable.attr("data-mediaurl").split(".mp3")[0],left:u+"%",top:s+"%",width:G+"%",height:A+"%"});var H=tmpl("tmpl-eaLAudio",y);break;case"colorBar video":v=320;D=240;G=parseInt(v/g.editingAreaWidth*100);A=parseInt(D/g.editingAreaHeight*100);var C,z,F;switch(E.draggable.attr("data-mediatype")){case"local":z=E.draggable.attr("data-mediaurl").split(".mp4")[0];F=E.draggable.find("img").attr("src");C="tmpl-eaLVideo";break;case"remote":var w=parseVideoURL(E.draggable.attr("data-mediaurl"));z="http://www.youtube.com/embed/"+w.id+"/?fs=1&feature=oembed";C="tmpl-eaRVideo";break}y.result.push({mediaurl:z,poster:F,left:u+"%",top:s+"%",width:G+"%",height:A+"%"});var H=tmpl(C,y);break}g.slideSaved=false;g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");m.helperFunctions.checkSlideState()},stop:function(x,v){var z=parseInt(l(this).offset().left/g.editingAreaWidth*100);var y=parseInt(l(this).offset().top/g.editingAreaWidth*100);var u=l(this).width(),w=l(this).height();var s=parseInt(u/g.editingAreaWidth*100);var t=parseInt(w/g.editingAreaHeight*100);if(l(this).hasClass(g.textClass)){l(this).css({left:z+"%",top:y+"%",width:s+"%",height:t+"%"})}},out:function(s,t){}}},k={loadSlideshowContainer2:document.getElementById("loadSlideshow2")||"",loadSlideshowButton2:document.getElementById("loadSlideShow2Button")||"",viewList:function(){l(this.loadSlideshowContainer2).empty().append(tmpl("tmpl-lsslist",g.loadedSlideshows));l(this.loadSlideshowButton2).find("span.name").text("select slideshow");this.setNoneditable(g.disabledSlideshows);this.setSlideshowAction()},loadSelectedSlideshow2:function(t){p={};p.action=j.slideshows[0];p.id=t.attr("data-id");p.form=l(o.form).serializeArray();f.url="/crawl?/process/editor/handelslideshow/";f.data=p;var u=getJsonData(f);if(!u){return false}k.setDisabled(t);var s=tmpl("tmpl-miniSlides",u,true);l(o.allslideshowContainer).empty().append(s);t.closest(".open").removeClass("open");var w=t.find("span.sname").text();var v=w.length>18?w.substring(0,15)+"...":w;l(k.loadSlideshowButton2).find("span.name").text(v).attr("title",w);g.prevOffset=false;this.setSlideAction()},setSlideshowAction:function(){l(k.loadSlideshowContainer2).on("click","a",function(s){s.preventDefault();s.stopPropagation();var t=l(this);if(t.attr("data-id")==""){return false}if(t.parent().hasClass("selected")){return false}k.loadSelectedSlideshow2(t);l(this).parent("li").siblings().removeClass("selected").end();l(this).parent("li").addClass("selected")})},setSlideAction:function(){var s=l(o.allslideshowContainer).find(".slideElement");s.live("click",function(u){u.preventDefault();if(l(this).closest(".dataHolder").hasClass("selected")){return false}l.each(s,function(){l(this).find(".dataHolder").removeClass("selected")});g.slideSaved=true;m.helperFunctions.checkSlideState();var t=l(this).closest("li");b.helperFunctions.setSelectedSlide(t)})},setDisabled:function(s){l(b.loadSlideshowContainer).find("a").each(function(){if(l(this).attr("data-id")!==""){l(this).removeClass("disabled")}});l(b.loadSlideshowContainer).find('a[data-id="'+s.attr("data-id")+'"]').addClass("disabled")},setNoneditable:function(s){l("li",k.loadSlideshowContainer2).filter(function(u,t){if(l(t).find("a").attr("data-id").indexOf(s)==1){l(t).parent().addClass("disabled")}})}},j={slide:{0:"load",1:"new",2:"delete",3:"update",4:"sort"},slideshows:{0:"load",1:"list",2:"new",3:"rename",4:"delete",5:"duplicate"},mediafiles:{0:"load",1:"loadgroup"}},h={0:o.leftContainer},q={},p={},f={url:"",data:p,responseType:"json"},g={diskAreaId:l('input[name="diskArea"]').val(),currentSlideShowId:null,disabledSlideshows:l.map(l("li.disabled a",b.loadSlideshowContainer),function(s){return l(s).attr("data-id")}),loadedSlideshows:[],templateSlide:false,slideSaved:true,slideShowSaved:true,prevOffset:false,selectedSlideshowId:"",selectedSlideHTML:"",selectedSlideId:"",selectedSlideBg:"rgba(0, 0, 0, 0)",slideIDs:[],editingAreaWidth:0,editingAreaHeight:0,textClass:"textClass",resizableClass:"ResizableClass",nonResizableClass:"nonResizableClass",isSelected:"isSelected",elementSelected:"elementSelected",triggerSave:false,scrollContainerHeight:345,scrollContainerInnerHeight:270,openedClass:"icon-eye-close",closedClass:"icon-eye-open",subDomain:""};var m={editorAreaElememts:{editorArea:document.getElementById("editorArea")||"",editorForm:document.getElementById("editorAreaForm")||"",init:function(){l(".deleteBox").live("click",function(){if(l(this).parent().hasClass(g.textClass)){m.helperFunctions.ckedit.removeEditorInstance(l(this).parent().find('div[id^="myInstance_"]').attr("id"));m.helperFunctions.ckedit.listEditorInstances()}l(this).parent().remove();g.slideSaved=false;m.helperFunctions.checkSlideState()})}},toolbarElements:{gridButton:document.getElementById("removeBG")||"",insertTextButton:document.getElementById("addText")||"",clearAreaButton:document.getElementById("clearArea")||"",newSlideButton:document.getElementById("newSlide")||"",duplicateSlideButton:document.getElementById("duplicateSlide")||"",saveSlideButton:document.getElementById("saveSlide")||"",newSlideshowButton:document.getElementById("createNewSlideShow")||"",previewSlideshowButton:document.getElementById("previewSlideShow")||"",exitPreviewButton:document.getElementById("exitPreview")||"",colorpicker:document.getElementById("colorPicker")||"",toCanvas:document.getElementById("toCanvas")||"",init:function(){m.helperFunctions.ctrlS();addEventO(m.editorAreaElememts.editorArea,"click",function(y){var z;var A="";var D=l(y.target);l("."+g.elementSelected).removeClass(g.elementSelected);if(y.target.id=="editorArea"&&l(m.toolbarElements.insertTextButton).hasClass("active")){var u=D.offset();var x=(y.pageX-u.left),s=(y.pageY-u.top),t=x/g.editingAreaWidth*100,I=s/g.editingAreaHeight*100;var B=new Date().getTime();var w=160,F=30;var G=parseInt(w/g.editingAreaWidth*100);var E=parseInt(F/g.editingAreaHeight*100);var C=[];C.result=[];C.result.push({instanceID:B,left:t+"%",top:I+"%",width:G+"%"});var H=tmpl("tmpl-eatext",C);l(m.editorAreaElememts.editorArea).append(l(H));g.slideSaved=false;m.helperFunctions.checkSlideState();g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");l(m.toolbarElements.insertTextButton).toggleClass("active");m.addDND();m.helperFunctions.addUIevents();var v="myInstance_"+B;m.helperFunctions.ckedit.createEditorInstance(v,true);l(m.editorAreaElememts.editorArea).trigger("input");g.slideSaved=false;return false}if(y.target.nodeName=="INPUT"){switch(D.attr("type")){case"radio":l("#editorArea :input").removeAttr("checked");D.attr("checked","checked");break;case"checkbox":!D.attr("checked")?D.removeAttr("checked"):D.attr("checked","checked");break}}if(y.target.getAttribute("class")=="movingBox"||y.target.nodeName=="I"){l(y.target).closest(".slideItem").addClass(g.elementSelected)}l(this).removeClass("active")},true,_eventHandlers);addEventO(m.editorAreaElememts.editorArea,"input",function(){m.helperFunctions.checkSlideState()},false,_eventHandlers);addEventO(m.toolbarElements.gridButton,"click",function(){l(m.editorAreaElememts.editorArea).toggleClass("pure")},true,_eventHandlers);addEventO(this.toCanvas,"click",function(){if(l(o.slideshowContainer).find(".selected").parent("li").index()){l("#confirmDiv").confirmModal({heading:"Alert",body:"Only from the first slide can be snapshot taken",text:"Ok",type:"question",callback:function(){return false}})}else{l(m.toolbarElements.saveSlideButton).trigger("click");m.toolbarElements.tocanvas()}l(this).removeClass("active")},true,_eventHandlers);addEventO(this.clearAreaButton,"click",function(s){s.stopPropagation();m.helperFunctions.se_clearData("normal");l(m.editorAreaElememts.editorArea).empty();if(!g.templateSlide){l(m.editorAreaElememts.editorArea).attr("data-template-type","normal")}if(l(o.slideshowContainer).find("li").length==0){l(m.toolbarElements.saveSlideButton).removeClass("btn-danger").addClass("btn-dark")}l(this).removeClass("active")},true,_eventHandlers);addEventO(this.newSlideButton,"click",function(){if(!m.helperFunctions.checkFormState("saveslidesform")){g.slideSaved=false;g.slideShowSaved=false;l("#confirmDiv").confirmModal({heading:"Alert",body:"You must create slideshow first",text:"OK",type:"question",callback:function(){l(this).removeClass("active")}});return false}l(m.toolbarElements.saveSlideButton).trigger("click");l(o.slideshowContainer).find(".dataHolder.selected").removeClass("selected");l(".description").val("");m.helperFunctions.se_clearData("template");l(m.editorAreaElememts.editorArea).attr("data-template-type","normal");var s=[];s.push("");s.push({html2:"",answare:""});b.helperFunctions.addNewSlide(s);b.helperFunctions.setSlidesCount();l(this).removeClass("active");return false},true,_eventHandlers);addEventO(this.duplicateSlideButton,"click",function(){if(l(o.slideshowContainer).find(".dataHolder.selected").length==0){return false}l(m.toolbarElements.saveSlideButton).trigger("click");var s=b.helperFunctions.getEditorHtml();b.helperFunctions.addNewSlide(s);l(this).removeClass("active")},true,_eventHandlers);addEventO(this.saveSlideButton,"click",function(){if(!m.helperFunctions.checkFormState("saveslidesform")){g.slideSaved=false;g.triggerSave=true;b.createNewSlideshow();return false}var s=b.helperFunctions.getEditorHtml();if(l(o.slideshowContainer).find(".dataHolder.selected").length==1){b.helperFunctions.updateSlide(s);m.helperFunctions.addUIevents();m.helperFunctions.addToolsEvent()}else{b.helperFunctions.addNewSlide(s)}l(m.toolbarElements.saveSlideButton).attr("class","btn btn-dark")},true,_eventHandlers);addEventO(this.newSlideshowButton,"click",function(s){s.stopPropagation();s.preventDefault();g.triggerSave=false;l(m.toolbarElements.saveSlideButton).trigger("click");b.createNewSlideshow()},true,_eventHandlers);addEventO(this.previewSlideshowButton,"click",function(v){v.stopPropagation();v.preventDefault();var t=l(this).attr("data-type");l(m.toolbarElements.saveSlideButton).trigger("click");var u=l('#saveslidesform [name="id"]').val();if(u!==""){if(t=="preview"){var s=l("#previewIframe");g.diskAreaId=l('#saveslidesform [name="diskArea"]').val();s.attr("src",g.subDomain+u+"/");s[0].contentWindow.focus()}}else{sendMessage("alert-warning","No slideshow selected!");return false}l("section.special").slideUp("fast");l("."+t).toggleClass("hidden");l("html, body").animate({scrollTop:l("#exitPreview").offset().top},1000);l(this).closest(".dropdown.open").removeClass("open")},false,_eventHandlers);addEventO(this.exitPreviewButton,"click",function(u){var t=l(this).attr("data-type");l("section.special").slideDown("slow");l("."+t).toggleClass("hidden");if(t=="preview"){var s=l("#previewIframe");s.attr("src","")}l("html, body").animate({scrollTop:l("#inner-headline").offset().top},1000);g.editingAreaHeight=g.editingAreaWidth*9/16;l(m.editorAreaElememts.editorArea).css("display","block")},false,_eventHandlers);this.initColorpicker()},tocanvas:function(){l("#loading").show();l(m.toolbarElements.gridButton).trigger("click");setTimeout(function(){html2canvas(l(m.editorAreaElememts.editorArea),{proxy:"/proxy",onrendered:function(s){var u=document.createElement("canvas");u.width=320;u.height=180;u.getContext("2d").drawImage(s,0,0,u.width,u.height);var t=u.toDataURL("image/png");l("#render").attr("src",t);l("#loading").hide();l(m.toolbarElements.gridButton).trigger("click");scrollToWorkingArea(l(".row.special"));l("#canvas").remove()}})},1000)},initColorpicker:function(){l(m.toolbarElements.colorpicker).spectrum({color:"#ECC",showInput:true,showInitial:true,showSelectionPalette:true,showAlpha:true,maxPaletteSize:10,preferredFormat:"rgb",localStorageKey:"skill.color",showButtons:false,clickoutFiresChange:true,showPalette:true,move:function(s){m.toolbarElements.setColor(s)},change:function(s){m.toolbarElements.setColor(s)},hide:function(s){m.toolbarElements.setColor(s)},palette:[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(133, 32, 12)","rgb(153, 0, 0)","rgb(180, 95, 6)","rgb(191, 144, 0)","rgb(56, 118, 29)","rgb(19, 79, 92)","rgb(17, 85, 204)","rgb(11, 83, 148)","rgb(53, 28, 117)","rgb(116, 27, 71)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)","transparent"]]})},resetColorPicker:function(){var s=l(m.editorAreaElememts.editorArea)[0].style;var t=l(m.toolbarElements.colorpicker).find("i")[0].style;t.backgroundColor="rgba(255,255,255,1)";s.backgroundColor="none"},setColorPicker:function(s){if(s==""){s="rgba(255,255,255,1)"}var t=l(m.editorAreaElememts.editorArea)[0].style;var u=l(m.toolbarElements.colorpicker).find("i")[0].style;u.backgroundColor=s;t.backgroundColor=s},setColor:function(u){var v=l(m.editorAreaElememts.editorArea).find("."+g.elementSelected);var x=l(m.toolbarElements.colorpicker).find("i")[0].style;var w=l(m.editorAreaElememts.editorArea)[0].style;var t=v.length;if(t){w=v[0].style}else{w=l(m.editorAreaElememts.editorArea)[0].style;v=l(m.editorAreaElememts.editorArea)}var s=u=="rgba(0, 0, 0, 0)"?"":u.toRgbString();x.backgroundColor=s;w.backgroundColor=s;if(!t){l(o.slideshowContainer).find('li[id="'+g.selectedSlideId+'"]').attr("data-bg",s);l(o.slideshowContainer).find('li[id="'+g.selectedSlideId+'"] > .dataHolder > .leftSide').css("background-color",s==""?"white":s);l(m.editorAreaElememts.editorArea).attr("data-bg",s)}g.slideSaved=false;m.helperFunctions.checkSlideState()}},bottombarElements:{bottomBar:document.getElementById("editorBottomBar")||"",slidetagInput:document.getElementById("slideTag")||"",description:document.getElementById("descArea")||"",levelCount:document.getElementsByName("levelCount")||"",testEditorContainer:document.getElementsByClassName("testSlideEditorContainer")||"",init:function(){addEventO(m.bottombarElements.slidetagInput,"keypress",function(){if(l(o.slideshowContainer).find(".dataHolder.selected").length==1){g.slideSaved=false;m.helperFunctions.checkSlideState()}},true,_eventHandlers)}},init:function(){m.toolbarElements.init();m.bottombarElements.init();m.editorAreaElememts.init()},addDND:function(){l(m.editorAreaElememts.editorArea).droppable(m.helperFunctions.ui.editorDropOption);l(m.editorAreaElememts.editorArea).find("."+g.nonResizableClass).draggable(m.helperFunctions.ui.editorElementdraggable);l(m.editorAreaElememts.editorArea).find("."+g.resizableClass).draggable(m.helperFunctions.ui.editorElementdraggable);l(m.editorAreaElememts.editorArea).find("."+g.resizableClass).each(function(){if(l(this).hasClass("video")){l(this).resizable(m.helperFunctions.ui.resizableVideoOptions)}else{l(this).resizable(m.helperFunctions.ui.resizableOptions)}});l(m.editorAreaElememts.editorArea).find("."+g.resizableClass).each(function(){if(l(this).hasClass("video")){l(this).resizable(m.helperFunctions.ui.resizableVideoOptions)}else{l(this).resizable(m.helperFunctions.ui.resizableOptions)}});l(m.editorAreaElememts.editorArea).find(".ui-resizable-handle").attr("style","z-index:1000;");l("[contenteditable]").live("focus",function(){var s=l(this);s.data("before",s.html());return s}).live("blur keyup paste",function(){var s=l(this);if(s.data("before")!==s.html()){s.data("before",s.html());s.trigger("change");g.slideSaved=false}return s})},removeDND:function(){if(l(m.editorAreaElememts.editorArea).data("draggable")){}},helperFunctions:{ctrlS:function(){l(document).bind("keydown","ctrl+s",function(s){if(s.ctrlKey&&(s.which==83)){l(m.toolbarElements.saveSlideButton).trigger("click");s.preventDefault();console.log("ctrl+s pressed");return false}})},ckedit:{clearEditorInstances:function(){for(name in CKEDITOR.instances){CKEDITOR.instances[name].destroy()}},createEditorInstance:function(w,v){if(!document.getElementById(w)){return false}var s=(!!(v==true));var u=[];var t=CKEDITOR.inline(w);return false;if(s){var t=CKEDITOR.inline(w)}if(!s){CKEDITOR.inline(w,{extraPlugins:"sharedspace",removePlugins:"floatingspace,resize",sharedSpaces:{top:"myNicPanel",bottom:"bottom"}})}return false},removeEditorInstance:function(s){CKEDITOR.instances[s].destroy()},listEditorInstances:function(){for(var s in CKEDITOR.instances){}}},ui:{editorDropOption:{tolerance:"pointer",accept:".image, .video, .audio, li",activeClass:"ui-state-highlight",hoverClass:"ui-state-active",drop:function(V,M){var S=l(this).offset();var C=V.pageX-S.left;var A=V.pageY-S.top;var z=C,y=A;C=parseInt(C/g.editingAreaWidth*100);A=parseInt(A/g.editingAreaHeight*100);if(!g.prevOffset&&(l(m.editorAreaElememts.editorArea).attr("data-template-type")!=="normal"&&l(m.editorAreaElememts.editorArea).attr("data-template-type")!=="puzzle")){}var O=false;if(l(m.editorAreaElememts.editorArea).attr("data-template-type")=="puzzle"){O=true}if(!g.prevOffset){return false}var K,U,L,W;var N=[];N.result=[];switch(M.draggable.children().attr("class")){case"colorBar image":if(O&&l(m.editorAreaElememts.editorArea).find("img").length>0){return false}K=160;L=parseInt(K/g.editingAreaWidth*100);N.result.push({mediaurl:M.draggable.attr("data-mediaurl"),left:C+"%",top:A+"%",width:L+"%",height:"auto"});var G=tmpl("tmpl-eaImage",N);l(this).append(l(G));break;case"colorBar audio":if(O){return false}K=250;U=30;L=parseInt(K/g.editingAreaWidth*100);W=parseInt(U/g.editingAreaHeight*100);N.result.push({mediaurl:M.draggable.attr("data-mediaurl").split(".mp3")[0],left:C+"%",top:A+"%",width:L+"%",height:W+"%"});var G=tmpl("tmpl-eaLAudio",N);l(m.editorAreaElememts.editorArea).append(l(G));break;case"colorBar video":if(O){return false}K=200;U=112;L=parseInt(K/g.editingAreaWidth*100);W=parseInt(U/g.editingAreaHeight*100);var t,v,I,X,w,H;switch(M.draggable.attr("data-mediatype")){case"local":var s=M.draggable.attr("data-video-width"),F=M.draggable.attr("data-video-height");var T=(g.editingAreaWidth-z)/s,B=(g.editingAreaHeight-y)/F,J=Math.min(T,B),x=s*J,Q=F*J;K=M.draggable.attr("data-video-width")+z>g.editingAreaWidth?x:M.draggable.attr("data-video-width");U=M.draggable.attr("data-video-height")+y>g.editingAreaHeight?Q:M.draggable.attr("data-video-height");L=parseInt(K/g.editingAreaWidth*100);W=parseInt(U/g.editingAreaHeight*100);v=M.draggable.attr("data-mediaurl").split(".mp4")[0];I=M.draggable.find("img").attr("src");t="tmpl-eaLVideo";X=M.draggable.attr("isotope-data-name").split(".mp4")[0];w=l("#themeList li.selected").attr("data-diskarea-id");H=l('input[name="office_nametag"]').val();break;case"remote":var P=parseVideoURL(M.draggable.attr("data-mediaurl"));v="http://www.youtube.com/embed/"+P.id+"?fs=1&feature=oembed&enablejsapi=1&html5=1";I="http://img.youtube.com/vi/"+P.id+"hqdefault.jpg";t="tmpl-eaRVideo";break}N.result.push({mediaurl:v,fname:X,poster:I,left:C+"%",top:A+"%",width:L+"%",height:W+"%",w:L,h:W});var G=tmpl(t,N);l(m.editorAreaElememts.editorArea).append(l(G));break;case"btn btn-dark":if(O){return false}var u,E=M.helper.clone();var S=l(m.editorAreaElememts.editorArea).offset(),C=V.pageX-S.left,A=V.pageY-S.top;var K,U,L,W;C=parseInt(C/g.editingAreaWidth*100);A=parseInt(A/g.editingAreaHeight*100);K=200;U=120;if(E.hasClass("group")){u=E.find("div.ResizableClass")}if(u.hasClass("ResizableClass")){}L=parseInt(K/g.editingAreaWidth*100);W=parseInt(U/g.editingAreaHeight*100);u.css({position:"absolute",left:C+"%",top:A+"%",width:L+"%",height:"auto"});var D=new Date().getTime(),R="myInstance_"+D;u.find(".sortableForm").attr("id","group_"+createUID());u.find(".textDiv").attr("id",R);l(m.editorAreaElememts.editorArea).append(u);m.helperFunctions.ckedit.createEditorInstance(R);break}m.helperFunctions.addUIevents();g.slideSaved=false;g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");m.helperFunctions.checkSlideState()},stop:function(x,v){var z=parseInt(l(this).offset().left/g.editingAreaWidth*100);var y=parseInt(l(this).offset().top/g.editingAreaWidth*100);var u=l(this).width(),w=l(this).height();var s=parseInt(u/g.editingAreaWidth*100);var t=parseInt(w/g.editingAreaHeight*100);if(l(this).hasClass(g.textClass)){l(this).css("height","auto")}this.style.left=z+"%";this.style.top=y+"%";this.style.width=s+"%"}},editorElementdraggable:{handle:"div.movingBox",containment:"#editorArea",drag:function(t,s){m.helperFunctions.removeToolsEvent()},stop:function(v,t){var x=l(this).position().left/g.editingAreaWidth*100;var w=l(this).position().top/g.editingAreaHeight*100;var s=l(this).outerWidth(),u=l(this).outerHeight();this.style.left=x+"%";this.style.top=w+"%";g.slideSaved=false;g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");m.helperFunctions.checkSlideState();m.helperFunctions.addToolsEvent(l(m.editorAreaElememts.editorArea).attr("data-template-type"))}},resizableOptions:{helper:"ui-resizable-helper",ghost:false,stop:function(u,z){var t=l(this).position().left/g.editingAreaWidth*100;var s=l(this).position().top/g.editingAreaHeight*100;var v=l(this).outerWidth(),y=l(this).outerHeight();var A=parseInt(v/g.editingAreaWidth*100);var x=parseInt(y/g.editingAreaHeight*100);this.style.left=t+"%";this.style.top=s+"%";this.style.width=A+"%";this.style.height=x+"%";if(l(this).parent().find(".sortableForm").length=0){l(this).find(".textDiv").css("height","100%")}g.slideSaved=false;g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");m.helperFunctions.checkSlideState();var w=l(this).find("iframe");w.css("pointer-events","none")},start:function(t,u){var s=l(this).find("iframe");s.css("pointer-events","none")},resize:function(t,s){}},resizableVideoOptions:{helper:"ui-resizable-helper",ghost:false,aspectRatio:true,start:function(t,u){var s=l(this).find("iframe");s.css("pointer-events","none")},stop:function(u,z){var t=l(this).position().left/g.editingAreaWidth*100;var s=l(this).position().top/g.editingAreaHeight*100;var v=l(this).outerWidth(),y=l(this).outerHeight();var A=parseInt(v/g.editingAreaWidth*100);var x=parseInt(y/g.editingAreaHeight*100);this.style.left=t+"%";this.style.top=s+"%";this.style.width=A+"%";this.style.height=x+"%";var w=l(this).find("iframe");w.attr("src",w.attr("src").replace(/w=(.*?)&h=/g,"w="+A+"&h="));w.css("pointer-events","auto");g.slideSaved=false;g.slideShowSaved=m.helperFunctions.checkFormState("saveslidesform");m.helperFunctions.checkSlideState();if(l(this).hasClass(g.textClass)){l(this).css("height","auto")}},resize:function(t,s){}}},addUIevents:function(){l(m.editorAreaElememts.editorArea).find("."+g.nonResizableClass).draggable(m.helperFunctions.ui.editorElementdraggable);l(m.editorAreaElememts.editorArea).find("."+g.resizableClass).draggable(m.helperFunctions.ui.editorElementdraggable);l(m.editorAreaElememts.editorArea).find("."+g.resizableClass).each(function(){if(l(this).hasClass("video")){l(this).resizable(m.helperFunctions.ui.resizableVideoOptions)}else{l(this).resizable(m.helperFunctions.ui.resizableOptions)}});l(m.editorAreaElememts.editorArea).find(".ui-resizable-handle").attr("style","z-index:1000;");l(o.slideshowContainer).nestedSortable(b.sortableSlides);l("[contenteditable]").live("focus",function(){var s=l(this);s.data("before",s.html());return s}).live("blur keyup paste",function(){var s=l(this);if(s.data("before")!==s.html()){s.data("before",s.html());s.trigger("change");g.slideSaved=false;m.helperFunctions.checkSlideState()}return s})},removeUIevents:function(){var s=l("#editorArea ."+g.nonResizableClass+":data(draggable)");if(s.length){l("#editorArea ."+g.nonResizableClass).draggable("destroy")}var s=l("#editorArea ."+g.resizableClass+":data(resizable)");if(s.length){l("#editorArea ."+g.resizableClass).resizable("destroy")}var s=l("#editorArea ."+g.resizableClass+":data(draggable)");if(s.length){l("#editorArea ."+g.resizableClass).draggable("destroy")}},serializeForm:function(t,w){var v=[];v.answare=[];v.html2=[];switch(w){case"normal":v.answare="";break;case"radio":case"check":case"input":v.answare=JSON.stringify(l(m.editorAreaElememts.editorForm).serializeArray());break;case"sorting":case"groupping":case"pairing":sortableForms=t.find('ul.sortableForm:not([id="group1"])');var x=[];l.each(sortableForms,function(){x.push({group:l(this).attr("id"),order:l(this).sortable().sortable("serialize")})});v.answare=JSON.stringify(x);break}var s=t.find('.sortableForm:not([id="group1"])');l.each(s,function(){var y=l(this).attr("id");l("#"+y+" li",t).tsort({order:"rand"})});var u=c.purgeHtml(t,w);v.html2=u;return v},addToolsEvent:function(t){var s=l("#editorArea .sortableForm li:data(sortable)");var w=createUID2();switch(t){case"radio":l(".tools").html('<li class="holder"><span class="btn btn-dark"><span class="icon-move"></span></span><input type="radio" name="options[]" value="0" class="regular-radio big-radio" id="'+w+'"><label for="'+w+'"></label><div class="textDiv" contenteditable="true">Option one is this and that</div></li>');l("#editorArea .sortableForm").droppable(r.formDrop);l("#editorArea .sortableForm li").sortable(r.formSortable);l(".tools li").draggable(r.toolsDrag);break;case"check":l(".tools").html('<li class="holder"><span class="btn btn-dark"><span class="icon-move"></span></span><input type="checkbox" name="chk[]" value="0" class="regular-checkbox big-checkbox" id="'+w+'"><label for="'+w+'"></label><div class="textDiv" contenteditable="true">Option one is this and that</div></li>');l("#editorArea .sortableForm").droppable(r.formDrop);l("#editorArea .sortableForm li").sortable(r.formSortable);l(".tools li").draggable(r.toolsDrag);break;case"input":l(".tools").html('<div class="holder" draggable="true" style="display: inline-block;" contenteditable="false" id="tmpP" ><span class="btn btn-dark"><span class="icon-move"></span></span><input type="text" name="inp" value="" class="input-small"/></div><div class="holder" draggable="true" style="display: inline-block;" contenteditable="false" id="tmpS"><span class="btn btn-dark"><span class="icon-move"></span></span><select name="sel"></select></div><span class="btn btn-dark pull-left" id="addOptionRow"><span class="icon-plus"></span></span><span class="btn btn-dark pull-left" id="refreshOption"><span class="icon-refresh"></span></span><div class="pull-left optionrowArea"></div>');l("#addOptionRow").bind("click",function(){l(".optionrowArea").append('<div class="optionrow"><input type="text" class="input-small" /><span class="btn btn-dark remove"><span class="icon-minus"></span></span></div>')});l("#refreshOption").bind("click",function(){l(".toolsContainerElements select").find("option").remove().end().append('<option value="">--Select--</option>');l(".optionrowArea input").each(function(A){if(l(this).val()!=""){l(".toolsContainerElements select").append('<option value="'+A+'">'+l(this).val()+"</option>")}})});l(".optionrowArea .remove").live("click",function(){l(this).parent().remove()});l("#editorArea input").live("keypress",function(B){var A=(B.keyCode?B.keyCode:B.which);if(A==13){return false}l(this).attr("value",l(this).val())});l("#editorArea select").live("keyup",function(){});l("#editorArea select").live("change",function(){l(this).find("option:selected").attr("selected","selected").siblings().removeAttr("selected")});l("#editorArea .sortableForm").droppable(r.formDrop);l(".tools .holder").draggable(r.toolsDrag);l("#editorArea .textDiv").focus();break;case"sorting":l(".tools").html('<li class="holder"><span class="btn btn-dark"><span class="icon-move"></span></span><div class="textDiv" contenteditable="true">sortable element</div></li>');l("#editorArea .sortableForm").droppable(r.formDrop);l("#editorArea .sortableForm li").sortable(r.formSortable);l(".tools li").draggable(r.toolsDrag);break;case"groupping":l(".tools").html('<li class="holder group"><span class="btn btn-dark"><span class="icon-move"></span></span><div class="ResizableClass textClass isSelected" style=""><div class="textDiv header">New group</div><div class="movingBox"><i class="icon-move"></i></div><div class="deleteBox"><i class="icon-remove"></i></div><ul class="sortableForm ui-sortable ui-droppable"></ul></div></li>');case"pairing":l(".tools").append('<li class="holder"><span class="btn btn-dark"><span class="icon-move"></span></span><div class="textDiv" contenteditable="true">sortable element</div></li>');l("#editorArea .sortableForm").droppable(r.formDrop);l("#editorArea .sortableForm li").sortable(r.formSortable);l(".tools li:not(.holder.group)").draggable(r.toolsDrag);l(".tools li.holder.group").draggable(r.toolsDrag2);l("#editorArea .sortableHolder").draggable(m.helperFunctions.ui.editorElementdraggable);break;case"puzzle":break;case"29p_1":case"29p_2":var y=l(m.editorAreaElememts.editorArea).find(":input");for(var v=0,z;z=y[v];v++){if(z.nodeName=="INPUT"){z.name="inp"+v}else{if(z.nodeName=="SELECT"){z.name="sel[]"}}}break}if(l(".trafficDataHolder .control-group").length==0){var x=[];x.result=[];switch(t){case"29p_1":x.result.push({prev:"",prevID:"",score:4,next:"",nextID:""});break;case"29p_2":x.result.push({prev:"",prevID:"",score:129,next:"",nextID:""});x.result.push({prev:"",prevID:"",score:155,next:"",nextID:""});x.result.push({prev:"",prevID:"",score:181,next:"",nextID:""});x.result.push({prev:"",prevID:"",score:207,next:"",nextID:""});x.result.push({prev:"",prevID:"",score:233,next:"",nextID:""});x.result.push({prev:"",prevID:"",score:259,next:"",nextID:""});break;case"29p_3":x.result.push({prev:"",prevID:"",score:0,next:"",nextID:""});break;case"sorting":x.result.push({prev:"",prevID:"",score:60,next:"",nextID:""});case"radio":case"check":case"input":case"groupping":case"pairing":case"puzzle":x.result.push({prev:"",prevID:"",score:99,next:"",nextID:""});break}var u=tmpl("tmpl-trafficdata",x);l(u).appendTo(l(".trafficDataHolder"))}},removeToolsEvent:function(){var s=l("#editorArea .sortableForm:data(droppable)");if(s.length){l("#editorArea .sortableForm").droppable("destroy")}var s=l("#editorArea .sortableForm li:data(sortable)");if(s.length){var s=l(".tools li:data(draggable)")}if(s.length){l(".tools li").draggable("destroy")}},se_clearData:function(s){switch(s){case"editor":l('#saveslidesform input[name="id"]').val("");l('#saveslidesform input[name="name"]').val("");g.templateSlide=false;case"all":l(m.editorAreaElememts.editorArea).attr("data-template-type","normal");l(m.editorAreaElememts.editorArea).empty();m.helperFunctions.ckedit.clearEditorInstances();l(o.slideshowContainer).empty();l("#bc").html("");l("#myNicPanel").empty();a.storeslideIDs();case"template":l(".testSlideEditorContainer").hide();l(".trafficDataHolder, .tools").html("");g.templateSlide=false;case"normal":l("#testSlides .slideElement .rightSide").parent().removeClass("selected");l("#editorBottomBar .level").hide();l("#slideTag").val("");g.triggerSave=false;g.slideShowSaved=true;g.slideSaved=true;l(m.editorAreaElememts.editorArea).empty();break}},checkFormState:function(t){var s=(l("#"+t+' input[name="id"]').val()!="");(s===false)?l("#saveSlide").removeClass("btn-dark").addClass("btn-danger"):l("#saveSlide").addClass("btn-dark").removeClass("btn-danger");return s},checkSlideState:function(){var s=g.slideSaved;(!s)?l(m.toolbarElements.saveSlideButton).removeClass("btn-dark").addClass("btn-danger"):l(m.toolbarElements.saveSlideButton).addClass("btn-dark").removeClass("btn-danger");return s}}};var a={handeslideAfterEvents:function(){m.helperFunctions.addUIevents();l(o.slideshowContainer).nestedSortable(sortableSlides);a.storeslideIDs();g.slideSaved=true},setTrafficData:function(){l(o.testsContainer).find(".dataHolder").each(function(){l(this).removeClass("selected")});var s,v,t,u=[];l(".trafficmanagerContainer .control-group").each(function(x,z){s=l(this).find("#slidePrev").val(),v=l(this).find("#slideScore").val(),t=l(this).find("#slideNext").val();var y=a.searchTrafficData(s),w=a.searchTrafficData(t);u.push({prev:s,prevID:(typeof(y)=="undefined"?0:y),score:v,next:t,nextID:(typeof(w)=="undefined"?0:w)})});return u},getTrafficData:function(s){var t=s.find(".whiteLine");var u=[];u.result=[];l.each(t,function(v,w){u.result.push({prev:l(w).find("span.badge.prev").text(),prevID:l(w).find("span.badge.prev").attr("data-slide-id"),score:l(w).find("span.badge.score").text(),next:l(w).find("span.badge.next").text(),nextID:l(w).find("span.badge.next").attr("data-slide-id")})});l(".trafficDataHolder").empty();return u},storeslideIDs:function(){slideIDs=[];l.each(l("#slidesList li.slideElement"),function(){var s=l(this).attr("id"),t=parseInt(l(this).find("span.badge.nr").text());slideIDs[s]=t})},searchTrafficData:function(t){for(var s in slideIDs){if(slideIDs[s]==t){return s}}},updateSlidesIDarray:function(u,s,t){switch(t){case"new":slideIDs[u]=s;break;case"delete":delete slideIDs[u];break;case"update":break}},getslidesIDforTrafficData:function(s){for(i in slideIDs){if(slideIDs[i]==s){return i}}},refreshslidesIDinTrafficData:function(u){var t=slideIDs[u];var v=l("#slidesList .trafficData").filter(function(){return l(this).find("span.badge.nr").attr("data-slide-id")==u});var v=l("#slidesList .trafficData").find('[data-slide-id="'+u+'"]');for(var s=0;s<v.length;s++){l(v[s]).text(slideIDs[u])}},searchslidesIDinTrafficData:function(t){var s=slideIDs[t];var u=l("#slidesList .trafficData").filter(function(){return l(this).find("span.badge.nr").attr("data-slide-id")==t});var u=l("#slidesList .trafficData").find('[data-slide-id="'+t+'"]');return u.length==0?false:true},deleteslidesIDinTrafficData:function(u){var t=slideIDs[u];var v=l("#slidesList .trafficData").filter(function(){return l(this).find("span.badge.nr").attr("data-slide-id")==u});var v=l("#slidesList .trafficData").find('[data-slide-id="'+u+'"]');for(var s=0;s<v.length;s++){l(v[s]).text(0).attr("data-slide-id","0")}}};var c={handlepaste:function(t,u){var s=t.innerHTML;var v;if(u&&u.clipboardData&&u.clipboardData.getData){if(/text\/html/.test(u.clipboardData.types)){v=u.clipboardData.getData("text/html")}else{if(/text\/plain/.test(u.clipboardData.types)){v=u.clipboardData.getData("text/plain")}else{v=""}}waitforpastedata(t,v);if(u.preventDefault){u.stopPropagation();u.preventDefault()}return false}else{c.waitforpastedata(t,v);return true}},waitforpastedata:function(t,s){if(t.childNodes&&t.childNodes.length>0){c.processpaste(t,s)}else{that={e:t,s:s};that.callself=function(){c.waitforpastedata(that.e,that.s)};setTimeout(that.callself,20)}},processpaste:function(t,s){pasteddata=t.innerHTML;return c.pasteHtmlAtCaret(c.cleanHTML(s))},pasteHtmlAtCaret:function(t){var x,s;if(window.getSelection){x=window.getSelection();if(x.getRangeAt&&x.rangeCount){s=x.getRangeAt(0);s.deleteContents();var u=document.createElement("div");u.innerHTML=t;var y=document.createDocumentFragment(),w,v;while((w=u.firstChild)){v=y.appendChild(w)}s.insertNode(y);if(v){s=s.cloneRange();s.setStartAfter(v);s.collapse(true);x.removeAllRanges();x.addRange(s)}}}else{if(document.selection&&document.selection.type!="Control"){document.selection.createRange().pasteHTML(t)}}g.prevOffset=false},isOrContains:function(t,s){while(t){if(t===s){return true}t=t.parentNode}return false},elementContainsSelection:function(t){var u;if(window.getSelection){u=window.getSelection();if(u.rangeCount>0){for(var s=0;s<u.rangeCount;++s){if(!isOrContains(u.getRangeAt(s).commonAncestorContainer,t)){return false}}return true}}else{if((u=document.selection)&&u.type!="Control"){return isOrContains(u.createRange().parentElement(),t)}}return false},cleanHTML:function(u){var t=document.createElement("span");t.innerHTML=u;var s=t.textContent||t.innerText;s=s.replace(/\n\n/g,"").replace(/<!--[\s\S]*?-->/g,"").replace(/<(.|\n)*?>/g," ");s=s.replace(/<(.|\n)*?>/g," ");s=c.replaceNbsps(s);for(i=0;i<100;i++){if(s.substr(0,6)=="<br />"){s=s.replace("<br />","")}}return s},getInputSelection:function(w){var z=0,u=0,y,v,t,s,x;if(typeof w.selectionStart=="number"&&typeof w.selectionEnd=="number"){z=w.selectionStart;u=w.selectionEnd}else{v=getSelectedText();if(v){s=w.innerHTML.length;y=w.innerHTML.replace(/\r\n/g,"").replace(/\n\n/g,"").replace(/<!--[\s\S]*?-->/g,"").replace(/<(.|\n)*?>/,"");y=c.replaceNbsps(y);t=w.createTextRange();t.moveToBookmark(v.getBookmark());x=w.createTextRange();x.collapse(false);if(t.compareEndPoints("StartToEnd",x)>-1){z=u=s}else{z=-t.moveStart("character",-s);z+=y.slice(0,z).split("\n").length-1;if(t.compareEndPoints("EndToEnd",x)>-1){u=s}else{u=-t.moveEnd("character",-s);u+=y.slice(0,u).split("\n").length-1}}}}return{start:z,end:u}},replaceNbsps:function(t){var s=new RegExp(String.fromCharCode(160),"g");return t.replace(s," ")},getSelectedText:function(){if(window.getSelection){return window.getSelection()}else{if(document.selection){return document.selection.createRange()}}return""},purgeHtml:function(t,v){var u="";if(v=="groupping"){var s=t.find('.sortableForm:not([id="group1"])');l.each(s,function(){var w=l(this).html();l("#sortableHolder",t).append(w);l(this).html("")})}l(t).find(".slideItem").each(function(){l(this).find(".movingBox").remove();l(this).find(".deleteBox").remove();l(this).find('[contenteditable="true"]').each(function(){l(this).contents().unwrap()});l(this).removeClass(g.textClass).removeClass("ResizableClass").removeClass(g.isSelected).removeClass(g.nonResizableClass).removeAttr("data-item-type");l(this).find(':input[type="text"]').each(function(){l(this).val("")});l(this).find(':input[type="radio"], :input[type="checkbox"]').removeAttr("checked");l(this).find("option").each(function(){l(this).removeAttr("selected")});l(this).find(".btn").each(function(){l(this).attr("class","btn-dark")})});l(t).find(".buttonClass").remove();return t.html()},recurseDomChildren:function(u,t){var s;if(u.childNodes){s=u.childNodes;c.loopNodeChildren(s,t)}},loopNodeChildren:function(t,s){var v;for(var u=0;u<t.length;u++){v=t[u];switch(v.tagName){case"IMG":case"AUDIO":case"VIDEO":var w=v.parentNode.getAttribute("class");if(w!=null){if(w.match(/ResizableClass/g)){v.parentNode.style.position="absolute"}}continue;break;case"DIV":if(v.parentNode.getAttribute("class")=="textClass ResizableClass"){v.parentNode.style.position="absolute"}}if(s){c.outputNode(v)}if(v.childNodes){c.recurseDomChildren(v,s)}}},outputNode:function(u){var t;t=/^\s+$/g;if(u.nodeType===1){for(var s=0;s<u.attributes.length;s++){}}else{if(u.nodeType===3){u.data=u.data.replace(t,"");if(u.data&&u.data.length==1){u.data=u.data.replace(/[\u0080-\uFFFF]+/g,"");if(u.parentNode.tagName=="SPAN"&&u.data.length==0){u.parentNode.parentNode.removeChild(u.parentNode)}}}}}};e.init=function(t){g.subDomain=t;l("#loading").show();initAccordion();initScroller();initAffix(h);for(var s in q){l(q[s]).preventEnter()}m.init();b.init();n.init();r.init();g.editingAreaWidth=m.editorAreaElememts.editorArea.offsetWidth;g.editingAreaHeight=m.editorAreaElememts.editorArea.offsetHeight;$window.resize(function(){g.editingAreaWidth=m.editorAreaElememts.editorArea.offsetWidth;g.editingAreaHeight=m.editorAreaElememts.editorArea.offsetHeight});l(".dropdown-toggle").dropdown();l("#loading").hide();l.fn.editable.defaults.mode="inline";l.fn.editable.defaults.dataType="json";l.fn.editable.defaults.emptytext="Please, fill this";l.fn.editable.defaults.url="";l("[title]").tooltip()};this.initScroller=function(){var z=l(window);var t=window,y=document,x=y.documentElement,v=y.getElementsByTagName("body")[0];var s,u;s=t.innerWidth||x.clientWidth||v.clientWidth;u=t.innerHeight||x.clientHeight||v.clientHeight;if(s<1200){l(b.loadSlideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"140px"});l(o.slideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"160px"});l(o.mymediaContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"140px"});l(o.testsContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"160px"});l(k.loadSlideshowContainer2).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"140px"});l(o.allslideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"160px"})}else{l(b.loadSlideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(o.slideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(o.mymediaContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"170px"});l(o.testsContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(k.loadSlideshowContainer2).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(o.allslideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"})}l(window).resize(function(){s=t.innerWidth||x.clientWidth||v.clientWidth;u=t.innerHeight||x.clientHeight||v.clientHeight;if(s<1170){l(b.loadSlideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"140px"});l(o.slideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"160px"});l(o.mymediaContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"140px"});l(o.testsContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"160px"});l(k.loadSlideshowContainer2).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"140px"});l(o.allslideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"160px"})}else{l(b.loadSlideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(o.slideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(o.mymediaContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"170px"});l(o.testsContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(k.loadSlideshowContainer2).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"});l(o.allslideshowContainer).slimScroll({position:"left",height:"400px",allowPageScroll:false,width:"190px"})}});if(window.outerWidth<1200){}};this.initAccordion=function(){l(".accordion").on("show",function(s){l(s.target).prev(".accordion-heading").find(".accordion-toggle").addClass("active");l(s.target).prev(".accordion-heading").find(".accordion-toggle i").removeClass("icon-plus");l(s.target).prev(".accordion-heading").find(".accordion-toggle i").addClass("icon-minus")});l(".accordion").on("hide",function(s){l(this).find(".accordion-toggle").not(l(s.target)).removeClass("active");l(this).find(".accordion-toggle i").not(l(s.target)).removeClass("icon-minus");l(this).find(".accordion-toggle i").not(l(s.target)).addClass("icon-plus")})}}(window.slideEditor=window.slideEditor||{},jQuery));
(function(b,f,g){var k={form:document.getElementById("statform")||"",folderSelect:document.getElementById("themeRow")||"",leftContainer:document.getElementById("mySlideshowsContainer")||"",diskAreaId:document.getElementsByName("diskArea_id").value,sumStatisticFrame:document.getElementById("sumStatisticFrame")||"",instanceStatisticFrame:document.getElementById("instanceStatisticFrame")||"",statisticHolder:document.getElementById("statisticHolder")||"",userTable:document.getElementById("userTable")||"",myUsersList:document.getElementById("myUsersList")||"",instanceHolder:document.getElementById("bc")||"",instanceList:document.getElementById("instanceList")||"",poleButtons:{buttons:document.querySelectorAll(".pole")||"",init:function(){f(".pole").each(function(){addEventO(this,"click",function(){var u=f(this).attr("data-pole");f(".summaryzedData  h1").each(function(){f(this).removeClass("btn-dark active")}).end();if(0==p[u].length){return false}f(".pole").each(function(){f(this).removeClass("active")}).end();f(this).addClass("active");f(k.myUsersList).html(tmpl("tmpl-usertable2",p[u]));return false},true,_eventHandlers)})}},inprogressButton:{$button:f(".inprogressTraining").find("h1")||"",init:function(){k.inprogressButton.$button.live("click",function(){f(k.myUsersList).empty();f(".pole").each(function(){f(this).removeClass("active")}).end();f(".summaryzedData  h1").each(function(){f(this).removeClass("btn-dark active")}).end();if(0==a.result.length){return false}f(this).addClass("btn-dark active");f(k.myUsersList).html(tmpl("tmpl-usertable2",a));return false})}},finishedButton:{$button:f(".finishedTraining").find("h1")||"",init:function(){k.finishedButton.$button.live("click",function(){f(k.myUsersList).empty();f(".pole").each(function(){f(this).removeClass("active")}).end();f(".summaryzedData  h1").each(function(){f(this).removeClass("btn-dark active")}).end();if(0==d.result.length){return false}f(this).addClass("btn-dark active");f(k.myUsersList).html(tmpl("tmpl-usertable2",d));return false})}},allusersButton:{$button:f(".totalUsers").find("h1")||"",init:function(){k.allusersButton.$button.live("click",function(){f(k.myUsersList).empty();f(".pole").each(function(){f(this).removeClass("active")}).end();f(".summaryzedData  h1").each(function(){f(this).removeClass("btn-dark active")}).end();if(0==m.result.length){return false}f(this).addClass("btn-dark active");f(k.myUsersList).html(tmpl("tmpl-usertable2",m));return false})}}},n={trainingList:document.getElementById("trainingList")||"",folderSelector:document.getElementById("daForTrainings")||""},e={groupList:document.getElementById("GroupList")||""},q={userList:document.getElementById("UsersList")||""},c={},s={url:"",data:c,responseType:"json"},p={},m={},a={},d={},l=[],j={trainings:{0:"load",1:"list"},instances:{0:"load",1:"list"},stat:{0:"load"}},o={0:k.leftContainer};var t={selectedId:0,isSlideshowSaved:false,init:function(){this.setTrainingActions()},viewTrainings:function(){c={};c.action=j.trainings[1];c.form=f(k.form).serializeArray();c.folderId=f(n.folderSelector).attr("data-diskarea-id");s.url="/crawl?/process/statistic/handeltraining/";s.data=c;var u=getJsonData(s);if(!u.result){return false}f(n.trainingList).html(tmpl("tmpl-miniTrainings",u));this.setTrainingActions()},setTrainingActions:function(){f(n.trainingList).find("li.publicationElement").live("click",function(u){u.preventDefault();t.clearSelection();h.clearSelection();h.clearInstances();r.clearSelection();i.clear();f(this).find(".dataHolder").addClass("selected");t.loadTraining(this)})},loadTraining:function(u){p={};m={};a={};d={};c={};c.action=j.trainings[0];c.form=f(k.form).serializeArray();c.trainingId=u.id;s.url="/crawl?/process/statistic/handeltrainingstat/";s.data=c;var w=getJsonData(s);if(!w.main){return false}var v=w.main[0];this.selectedId=v.id;f(k.form).find('input[name="id"]').val(v.id);if(w.result){i.publishSummarized(w)}},clearSelection:function(){f(n.trainingList).find(".selected").removeClass("selected");i.clear();h.clearSelection()}};var i={clear:function(){f(k.myUsersList).empty();f(k.statisticHolder).find(".strdata").html("");f(k.statisticHolder).find(".intdata").html("0");p=0;m=0;a=0;d=0},publishSummarized:function(v,u){f(k.myUsersList).empty();if(u===true){f(k.statisticHolder).addClass("users").removeClass("well well-small");f(k.statisticHolder).append(tmpl("tmpl-statpanel2",v))}else{f(k.statisticHolder).removeClass("users").addClass("well well-small");f(k.statisticHolder).html(tmpl("tmpl-statpanel",v))}p=v.result[0].trainingrates;m=v.result[0].traininguser;a=v.result[0].in_progressuser;d=v.result[0].finisheduser;k.poleButtons.init();k.inprogressButton.init();k.finishedButton.init();k.allusersButton.init()}};var h={selectedInstanceId:0,selectedGroupId:0,init:function(){this.selectGroup()},selectGroup:function(){f(e.groupList).find("li.mbcholder").live("click",function(){t.clearSelection();h.clearSelection();h.clearInstances();r.clearSelection();f(this).addClass("selected");i.clear();h.selectedGroupId=f(this).attr("data-object-id");h.listInstances(h.selectedGroupId);f(k.statisticHolder).html(tmpl("tmpl-statpanel_empty",""))})},selectInstances:function(v){var u=[];u.result=[];u.result.push(l.result[v]);i.clear();i.publishSummarized(u)},listInstances:function(y){l=[];c={};c.action=j.instances[1];c.form=f(k.form).serializeArray();c.groupid=y;s.url="/crawl?/process/statistic/handelgroupstat/";s.data=c;var w=getJsonData(s);if(!w){this.clearInstances();return false}l=w;var x=[];for(var v in w.result){x.push(v)}f(k.instanceHolder).removeClass("hiddenClass");for(var u=0,v;v=w.main[u];u++){f(k.instanceList).append('<li class=""><a href="#" data-id="'+x[u]+'">'+v.title+"</a></li>")}f(k.instanceList).find("a").bind("click",function(z){z.preventDefault();f(this).parent().siblings().removeClass("active").end();f(this).parent().addClass("active");h.selectInstances(f(this).attr("data-id"))})},clearInstances:function(){f(k.instanceHolder).addClass("hiddenClass");f(k.instanceList).empty();i.clear()},clearSelection:function(){f(e.groupList).find(".selected").removeClass("selected")}};var r={selectedUserId:0,init:function(){this.selectUser()},viewUsers:function(){},selectUser:function(){f(q.userList).find("li.mbcholder").live("click",function(){f(this).siblings().removeClass("selected").end();f(this).addClass("selected");t.clearSelection();h.clearInstances();i.clear();r.selectedUserId=f(this).attr("data-object-id");r.listInstances(r.selectedUserId)})},selectInstances:function(v){var u=[];u.result=[];u.result.push(l.result[v]);i.publishSummarized(u,true)},listInstances:function(y){l=[];c={};c.action=j.instances[1];c.form=f(k.form).serializeArray();c.userid=y;s.url="/crawl?/process/statistic/handeluserstat/";s.data=c;var w=getJsonData(s);if(!w){h.clearInstances();return false}l=w;var x=[];for(var v in w.result){x.push(v)}f(k.statisticHolder).html("");for(var u=0,v;v=w.main[u];u++){r.selectInstances(x[u])}return false;for(var u=0,v;v=w.main[u];u++){f(k.instanceList).append('<li class=""><a href="#" data-id="'+x[u]+'">'+v.title+"</a></li>")}f(k.instanceHolder).removeClass("hiddenClass");f(k.instanceList).find("a").bind("click",function(z){z.preventDefault();f(this).parent().siblings().removeClass("active").end();f(this).parent().addClass("active");r.selectInstances(f(this).attr("data-id"))})},clearInstances:function(){f(k.instanceHolder).addClass("hiddenClass");f(k.instanceList).empty();i.clear()},clearSelection:function(){f(q.userList).find(".selected").removeClass("selected")}};b.init=function(v){f(n.trainingList).slimScroll({position:"left",height:"300px",allowPageScroll:false,width:"190px"});f(e.groupList).slimScroll({position:"left",height:"300px",allowPageScroll:false,width:"190px"});f(q.userList).slimScroll({position:"left",height:"300px",allowPageScroll:false,width:"190px"});for(var u in o){f(o[u]).affix({offset:{top:function(){return $window.width()<=1200?150:180},bottom:0}})}initAccordion();t.init();h.init();r.init()};this.initAccordion=function(){f(".accordion").on("show",function(u){f(u.target).prev(".accordion-heading").find(".accordion-toggle").addClass("active");f(u.target).prev(".accordion-heading").find(".accordion-toggle i").removeClass("icon-plus");f(u.target).prev(".accordion-heading").find(".accordion-toggle i").addClass("icon-minus")});f(".accordion").on("hide",function(u){f(this).find(".accordion-toggle").not(f(u.target)).removeClass("active");f(this).find(".accordion-toggle i").not(f(u.target)).removeClass("icon-minus");f(this).find(".accordion-toggle i").not(f(u.target)).addClass("icon-plus")})}}(window.Statistic=window.Statistic||{},jQuery));